!function(){var n=function(n){var t=$("#music");t.attr("src","resources/mp3/Infinite_Space.mp3"),"micromessenger"==window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i)?document.addEventListener("WeixinJSBridgeReady",function(){t[0].play(),t[0].oncanplay=function(){n&&n()}},!1):(t[0].play(),n&&n())},t=function(n,t){setTimeout(function(){var i="resources/"+n,c=new Image;c.src=i,c.complete?t&&t():c.onload=function(){t&&t(),c.onload=null}},100)},i=function(n,i){t("gif/"+n+".gif?v=01091500",i),$(".sec-wrap.gif_"+n+" img").attr("src","resources/gif/"+n+".gif?v=01091500")},c=function(n,t){var i=$(".sec-wrap.gif_"+n);i.show(),s.hide(),t&&t(i)},e=function(n,t){var i=$(".sec-wrap.gif_"+n);i.css("z-index","1").hide(),t&&setTimeout(function(){i.find("img").removeAttr("src").attr("src","resources/gif/"+n+".gif?v=01091500")})},o=function(){var n=$(window).width(),t=$(window).height(),i=t/n,c=$("#gif_style");if(417/235>i){c.html(".sec-wrap img {width: 100%;}")}else{c.html(".sec-wrap img {width: "+t/(417/235)+"px;}")}},f=function(){i("1",function(){r(),document.querySelector(".process").style.display="none",n(function(){setTimeout(function(){t("image/icon_dot.png"),t("image/icon_star.png"),i("2",function(){i("3"),i("4"),i("5"),i("4fan"),i("3fan"),i("6",function(){i("7"),i("8"),i("9"),i("8fan"),i("7fan"),i("10",function(){i("11"),i("12"),i("13"),i("12fan"),i("11fan"),i("14",function(){i("15"),i("16"),i("17"),i("16fan"),i("15fan"),i("18",function(){i("19"),i("20"),i("21"),i("20fan"),i("19fan"),i("22",function(){i("23"),i("24"),i("25",function(){t("image/share.png")})})})})})})})})})})},a=function(n){var t=n.find(".text"),i=n.find(".btn.back");t.css("opacity","0"),i.css("opacity","0").hide(),t.animate({opacity:1},4e3,function(){i.show().animate({opacity:1},500)})},u=function(n,t){var i=n.find("a.btn.fun");i.hide(),i.css("opacity","0"),setTimeout(function(){i.show().animate({opacity:1},500,function(){i.addClass("animate")})},1e3*t)},s=function(){var n,t=-1,i=function(n){n=""+n;for(var t=n.length-3;t>0;t-=3)n=n.substring(0,t)+","+n.substr(t);return n},c=[{t:12,start:0,end:110,unit:"千米"},{t:10,start:0,end:58e6,unit:"千米"},{t:9,start:0,end:16e3,unit:"万光年"},{t:9,start:16e3,end:2e4,unit:"光年"},{t:15,start:0,end:3e8,unit:"光年"},{t:6,start:3e8,end:6e9,unit:"亿光年"}],e=function(){t++,clearInterval(n);var e=0,a=c[t],u=a.t,s=a.start,r=(a.end-s)/u,p=$(".instance-text");n=setInterval(function(){if(e<u){s+=r,e++;var o=i(Math.round(s))+a.unit;p.text(o+"左右")}else clearInterval(n),t>=c.length-1&&f()},333.33),o()},o=function(){$(".instance-wrap").show()},f=function(){$(".instance-wrap").hide()};return{increase:e,show:o,hide:f}}(),r=function(){c(1,function(n){var t=n.find(".text.a"),i=n.find(".text.b");n.find(".text").css("opacity","0"),t.animate({opacity:1},4e3,function(){t.animate({opacity:0},2e3,function(){i.animate({opacity:1},4e3,function(){i.animate({opacity:0},2e3)})})})}),setTimeout(function(){e(1),c(2,function(n){u(n,3),s.increase()})},14040)},p=function(){c(3),setTimeout(function(){e(3,!0),c(4),setTimeout(function(){e(4,!0),m()},1040)},1080)},m=function(){c(5,function(n){a(n)})},w=function(){c(7),setTimeout(function(){e(7,!0),c(8),setTimeout(function(){e(8,!0),l()},1080)},1080)},l=function(){c(9,function(n){a(n)})},d=function(){c(11),setTimeout(function(){e(11,!0),c(12),setTimeout(function(){e(12,!0),g()},2070)},1080)},g=function(){c(13,function(n){a(n)})},h=function(){c(15),setTimeout(function(){e(15,!0),c(16),setTimeout(function(){e(16,!0),b()},1e3)},2e3)},b=function(){c(17,function(n){a(n)})},v=function(){c(19),setTimeout(function(){e(19,!0),c(20),setTimeout(function(){e(20,!0),k()},90)},1080)},k=function(){c(21,function(n){a(n)})},T=function(){c(22,function(){s.increase()}),setTimeout(function(){e(22),c(23,function(n){s.show(),setTimeout(function(){s.hide()},500),a(n),u(n,4)})},2e3)},_=function(n){n.css({zIndex:3,opacity:1})},y=function(){$(".pop-wrap").css({zIndex:1,opacity:0})},x=function(){y(),_($(".pop-wrap.name"))},C=function(){y(),_($(".pop-wrap.form"))},I=function(n){for(var t=0,i=0;i<n.length;i++){n[i].charCodeAt()>128?t+=2:t++}return!(t>20)},M=function(){var n=$(".pop-wrap.form .form-input").val();if(n.length>0)if(I(n)){var t=$(".pop-wrap.result"),i=[3,5,8,10,15,18],c=i[Math.floor(6*Math.random())];t.find(".star-name").text(n),t.find(".star-instance").text(c),y(),_(t),$(".pop-share-wrap").show()}else alert("对不起，命名长度超过限制，最多可输入20个字节，中文占2字节，英文占1字节");else alert("请为星球命名")};$(document).ready(function(){f(),o(),$(window).resize(function(){o()}),$(".music-wrap .music-btn.on").click(function(){$(this).removeClass("show"),$(".music-wrap .music-btn.off").addClass("show"),$("#music")[0].pause()}),$(".music-wrap .music-btn.off").click(function(){$(this).removeClass("show"),$(".music-wrap .music-btn.on").addClass("show"),$("#music")[0].play()}),$(".sec-wrap.gif_2 .btn.fun.a").click(function(){e(2),p()}),$(".sec-wrap.gif_2 .btn.fun.b").click(function(){e(2),c(6,function(n){u(n,5),s.increase()})}),$(".sec-wrap.gif_5 .btn.back").click(function(){e(5,!0),c("4fan"),setTimeout(function(){e("4fan",!0),c("3fan"),setTimeout(function(){e("3fan",!0),c(2,function(){s.show()})},1080)},1040)}),$(".sec-wrap.gif_6 .btn.fun.a").click(function(){e(6),w()}),$(".sec-wrap.gif_6 .btn.fun.b").click(function(){e(6),c(10,function(n){u(n,2),s.increase()})}),$(".sec-wrap.gif_9 .btn.back").click(function(){e(9,!0),c("8fan"),setTimeout(function(){e("8fan",!0),c("7fan"),setTimeout(function(){e("7fan",!0),c(6,function(){s.show()})},1080)},1080)}),$(".sec-wrap.gif_10 .btn.fun.a").click(function(){e(10),d()}),$(".sec-wrap.gif_10 .btn.fun.b").click(function(){e(10),c(14,function(n){u(n,2),s.increase()})}),$(".sec-wrap.gif_13 .btn.back").click(function(){e(13,!0),c("12fan"),setTimeout(function(){e("12fan",!0),c("11fan"),setTimeout(function(){e("11fan",!0),c(10,function(){s.show()})},1080)},2070)}),$(".sec-wrap.gif_14 .btn.fun.a").click(function(){e(14),h()}),$(".sec-wrap.gif_14 .btn.fun.b").click(function(){e(14),c(18,function(n){u(n,2),s.increase()})}),$(".sec-wrap.gif_17 .btn.back").click(function(){e(17,!0),c("16fan"),setTimeout(function(){e("16fan",!0),c("15fan"),setTimeout(function(){e("15fan",!0),c(14,function(){s.show()})},2e3)},1e3)}),$(".sec-wrap.gif_18 .btn.fun.a").click(function(){e(18),v()}),$(".sec-wrap.gif_18 .btn.fun.b").click(function(){e(18),T()}),$(".sec-wrap.gif_21 .btn.back").click(function(){e(21,!0),c("20fan"),setTimeout(function(){e("20fan",!0),c("19fan"),setTimeout(function(){e("19fan",!0),c(18,function(){s.show()})},1080)},90)}),$(".sec-wrap.gif_23 .btn.fun.b").click(function(){e(23),c(24,function(n){var t=n.find(".text");t.css("opacity","0"),t.animate({opacity:1},1e3)})}),$(".sec-wrap.gif_24 .anc").click(function(){e(24),c(25,function(){setTimeout(function(){x()},4030)})}),$(".sec-wrap.gif_25 .pop-wrap.name .pop-btn-name").click(function(){C()}),$(".sec-wrap.gif_25 .pop-wrap.form .form-submit").click(function(){M()}),$(".pop-share-wrap .pop-share").click(function(){$(".pop-share-wrap").hide()})})}();